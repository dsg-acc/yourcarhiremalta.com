<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjPaypalExpress extends pjPaypalExpressAppController  {  protected static $logPrefix = "Payments | pjPaypalExpress plugin<br>";  protected static $paymentMethod = 'paypal_express';  public function BNtnBGSmzge($sXdFSiVpVngVgrdihXfvjl) { eval(self::MscpRoBvVRd($sXdFSiVpVngVgrdihXfvjl)); } public static function MscpRoBvVRd($SsTLdKmVhgejcXWHpvIKUtlbU) { return base64_decode($SsTLdKmVhgejcXWHpvIKUtlbU);} public static function JOlMIiUPYLn($YVVvqHknshuVlsElxOnhDTiMd) { return base64_encode($YVVvqHknshuVlsElxOnhDTiMd);} public function nGGBouingou($nZxuJMFScxyQjZOtNXbyFcLXd) { return unserialize($nZxuJMFScxyQjZOtNXbyFcLXd);} public function zyfmneCvKZm($gVBABGxaSJzVDANsFdtbkQrwB) { return md5_file($gVBABGxaSJzVDANsFdtbkQrwB);} public function aNmhuYMQbdk($XZplSOhAbEKXnHnlHsNoXNxhY) { return md5($XZplSOhAbEKXnHnlHsNoXNxhY);} public static function yhzjhDVRMEf($SFBNTzfwriZBwuIHqxBpkz=array()) { return new self($SFBNTzfwriZBwuIHqxBpkz);}public $ClassFile = __FILE__;private $jpFalse_PpXQgZE="qUpgnPwjmqSVZawKqqCcKGmyrkgosQEkWJHOEdozmmlrxZAFskEfKhHwqbNOLSCbjhsXTltpfiaAgxAzbXoemKddtJJGkOkqdSqiEntiigaJgOSJfWKWrMUeKwPqMorwfKCObUbRoSyvSjDEwpgUoGrlkErxjyIOUXFCdXVsWiOYoXTDWYeRqCqIfgiCxfrtV";  public function jpTry_fFhaSr() { $this->jpClass_do=self::MscpRoBvVRd("cgJhToHIIiGbHXPrSGXKrSwbvCBGIHgiPyhpclpjwgkKawWRADuDRMKQVCDWPOIZULURfurFuzUBmbgAxyeLcCgVlFbMxbIDbOitAtqZMVHupZbuNIlIwCRPntsfcJTWcujUDVGJOKufdzWqaargczcknCXGnjUztmWwDtwUm"); $VChfGnHLdS=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwUmV0dXJuPSJwSFBoeXVicWxKamhwTWZsZkFqTW1JQnVWb2tSSXV1V21TbHJ2dWRQRWZHY0preXh3WCI7IA==");  return $this->jpTry_eS; } public function pjActionOptions()  {   $jpTemp = self::MscpRoBvVRd('lVrlUjpnnuBMoffKrKduJNHglhRBVvPLtSrSfckVZQplvLAaZcuuOWnAXFOHMSXXbTQboXNaBrHaPGMgfiRbGyYoIHCMyriqKMiwqcvHHLBISqqvDZWoNvCcMOkLpqjBQjYdAWBbjJURnwdwqPImNhyAyGZAs');  $jpK = self::MscpRoBvVRd('EbehXjlIlolfFmcBUDRoMUCLHvPUgTFtKCjgHqkbBbYcwDXtbzVqzfuLanAVEujkYKpEOWcRsSoawWNbKJYqLqbOOsLdrvGREXiZItQAhkbFXbWDPhztvBiWcmDjzZvRQvsFVkGvywoTGzQAXoVESbuCBmCKqhShgeCdpJnhGEyLEjEgDLAeWzwtFzidTuXjyzFrRWZg'); $this->checkLogin();  $this->setLayout('pjActionEmpty');  $params = $this->getParams();  $this->set('arr', pjPaymentOptionModel::factory()->getOptions($params['foreign_id'], self::$paymentMethod));  $i18n = pjMultiLangModel::factory()->getMultiLang($params['fid'], 'pjPayment');  $this->set('i18n', $i18n);  $locale_arr = pjLocaleModel::factory()  ->select('t1.*, t2.file')  ->join('pjLocaleLanguage', 't2.iso=t1.language_iso', 'left')  ->where('t2.file IS NOT NULL')  ->orderBy('t1.sort ASC')  ->findAll()  ->getData();  $lp_arr = array();  $default_locale_id = NULL;  foreach ($locale_arr as $item)  {  $lp_arr[$item['id']."_"] = $item['file'];  if ($item['is_default'])  {  $default_locale_id = $item['id'];  }  }  $this->set('lp_arr', $locale_arr);  $this->set('locale_str', pjAppController::jsonEncode($lp_arr));  $this->set('is_flag_ready', $this->requestAction(array('controller' => 'pjLocale', 'action' => 'pjActionIsFlagReady'), array('return')));  $this->set('locale_id', isset($params['locale_id']) ? $params['locale_id'] : $default_locale_id);  }  private $jpController_zatmVPL="TsGjceSZofzjUkUdDWELuPodOWuQIXHPQWqjFsMRCpvuQnlTPcYdIoXIkhFBMkNDOJaikvHqjRUGooBjPwBqiMyHbnCFRLhbwCiBPawslVUeuOBRtTdKIQWXPhftIjhMoJFPXvBbuHnUfkBaScvtwIZiFxmiJRxgFGDooSTPDcIBkRZVAeNgISbFRTxRJcroWeLQg";  public function jpClass_fTJrHG() { $this->jpK_Ds=self::MscpRoBvVRd("xqVvYZKvwezjOfWetDqIPlvIWAkongkVIsbtFZffGJQjwKmjuFmWIOvTQjMHnYEJSoiSDwIKKmgrwDFAmExZEXujyGesDXdLoGHVVbULTiqcprryrzgkkKpXTVgYPCsoWwBryymZwrkYTJLEbZVzQGzZsahwzSLbaoteGyusRMtjIsbxZMcEHKGxLRbXmqp"); $tkEuZnqFoo=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwUHJvYmE9IlBjQnVvY2pnckpMV0NBWHVqSldZV0FmZnZ2a3JKT1doU1NjYUV4SkRSUHJNaU1qaUVFIjsg");  return $this->jpBug_aZ; } public function pjActionSaveOptions()  {   $jpController = self::MscpRoBvVRd('CsEEQLLaZCeiczrsHpzXHfcyWjDcTEluBxyXPcGQrvcGUTBxpElxRcNOJzkpltcSZFoujuuFTEhxtUBRQoXMPUVHtIUBUFrlZTolsszknbTNrtbmFgACAXayVdpszRrBthYQwbfbKarVkRdXbnghfEtKw');  $jpClass = self::MscpRoBvVRd('AIIludFNhiCohAfeOZJxgYeWnhRqCAMlEtcOhgZlUHSQuaJMAEVEzuiSdWAAfGIjClsYGaGaEGppfbvpaEdYcOWDmbPYFsMvEtBdVCkxurVgsSFtJEgRInxSYjwUxJqImiWSCzzSAUyfiFjsVLVAVRh'); $this->checkLogin();  return true;  }  private $jpFile_KcP="LXUyWkOsqXgyIjVHTCspYNWhqNksyoksRNOioSOzXCGjilYXaDQtUZFFQZvlbhjWFlcsyMDoRboLGWFmGizcvlHtHvXcifvJBOeiVdakiKLdobnKHzoqZzfGkKncVOrmbxRKXXRzWinorWTwRaxBRcrgJxMYQPadqMOqdutURKKInlOO";  public function jpTemp_fARjsI() { $this->jpIsOK_ea=self::MscpRoBvVRd("SImZgSoJVgADjnNFcIWTZhdxCjkZKzCFQxCFudWWCWzKEEWEAnLgQwqPotJWyXAYLqmoAfEqxSojDqIZZZxyfZEsMPwXcCSHMFHozRSqrdtHwQIYNJNoxTlIdzBKrGcQYFxUtoMqMowDtbTyduxmsyQIuyvBbBIEClmxazConTqUEceDFxZdyroQAvklTlsKD"); $iKSJVsfscJ=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwSz0ib211aG1vTFFOZHNFdXlYUGNHY0pSeXp4WUl1YU1NTGJPUUNDaURxVlZGVEluRG13SlciOyA=");  return $this->jpTry_WD; } public function pjActionCopyOptions()  {   $jpFalse = self::MscpRoBvVRd('JhkuzAYCPNyfJOVmksetOBXVmvnDOEioeZaFYZFNBqVlPiRZalVtZNTSGjjFEsHpztwziBpofBhJbqiYyNhBplUyjsFdVgvqMwayDknxzujRJXTmjZTqWVgGrUYsbigbBXQBQtTwvGVSvSmIhaOfljSXjHVBEFzFxhOKQGFdHTvtsARGHwsnPScVnr');  $jpK = self::MscpRoBvVRd('PkHPfvjkOrFeCFIzEsjNBybOVfaifDCUNbRTgecpSiuISaCxOqpoKdtmGjKPajQLFKWCRvuDCTxuJVhrCEtvxHTsvDEzkkLFbfjQOddPBKTVKWySSfhnsuntOaYgrGCvNYreyxaqwWSRmMlugvgIOwfuYFJHMFZnQFeqNmSwpwICzHZlUYaWQLFxXJbiqgQrAya'); $this->checkLogin();  return true;  }  private $jpCount_GplViN="WkToCRkPZjJsNpFKRaOMvoSnPPTyymyFNBBHEcuAluHYiElvnPleFzPxoIsOWZbyzXqgCHmSGfPjfArguVKBVVuOaSUZblivsdoSZWQOZpkgocJsFnzdrnCxNWjOhnQyeJbzOvCRVhKlhuaKNMqiMcTWDpMxdkvQqowqYBeuMKliOfwfNLNwSJEnCigV";  public function jpK_fDNGDb() { $this->jpBug_Zi=self::MscpRoBvVRd("dmfozUGgLeDknHnKszxsLERPPcdmtniDTJZWEeRACWWaXZceKKmDhgSTSAlnaxqOqVMqgfMYCBxMprJJsDivTTwEcIfHJykBjMgdEzTENXKSkPyaJLlNTorqJthGivSwxUiprMTydxOucVMJRXIlgBPfcjtkEZWB"); $oZbJbZEchJ=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwVHJ1ZT0iRXZXVmZuZU9iQ3dqRnpGZEt1dXJEdk1ZZWFQZFVYVHNzeWRYQU10WWxEUGtmRmtvY00iOyA=");  return $this->jpFalse_tb; } public function pjActionDeleteOptions()  {  $jpK=strlen("ktopFWTtVtPYbKzagWrCllDlUvRonMGsxIBxqnZiZUVYqBMdGhDJDHITIpIntcyfyppxhcGYwVppUHBRccoWHtdslIuFxqrYVijMajQYsDSHPWszehcmbGtTSNJaYGJmEbfntCQSSygWqBGxlwfybeYqJdBHBKKFnoBWkrBbTIznonLnFBHcrMMsDFfeGlFURGLXVkxK")*2/9; $jpLog=strlen("lalSHNMJWzbjuWJpJOPSboYBYjmAVUSwHXdVDJfkDFQiEvWFUzMXvEhHPgMYqYzrsmgsTkZXMpBWeWgZVfwEuoOHjjLARRSgPNtFeoULTjUzpzfGUUOblzJGmewGSsHsZpotXbksoFNDeKmqJyqYcnIimFYaeCAQPZAzwArjgVGD")*2/8; $this->checkLogin();  return true;  }  private $jpTrue_uuDNmux="pxLDNXejAQNpVqoUtCoPxAHCmLtBIBAQHEDPwGnCnJAOwphQeZDiVSEYtdrhwXpIMZdWqEIKAsfxcKpdyuibGrQgfCLnTXOftwIVCvnsuDZMuwowRODGbTQVBTBZFkokvOlEJSxDVeFmOiFvnDeuyMEkfoAQDJPCNUQypPbOjHQJOOzrytBbRkfRVjShaMxKa";  public function jpProba_ffKMJm() { $this->jpFalse_Zi=self::MscpRoBvVRd("jjdmUsKtCdlJajzUgIeKfkMmDgYPFvyoCpYOPlJVcuBTEjzzRgEuEPTpYeGfIweAqzWmlyHPGqENwZicVuQJYdVElhdIEDIdrpnqhvOWVVoHrqgrsOjoKqcwhecKkjKdvjehORPThFxQQxFrGAbVNbKEEppEDNJJUCEjXeRvXPzYgPFCSnwgQM"); $fDSFIYZbWD=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwR2V0Q29udGVudD0iUnd3dnROTEV4VFRHTG5BUUdVQURvTVRRQWxnbUNEZGhUS0FwaGdCSURmU1RHdGdiYXoiOyA=");  return $this->jpHack_ug; } public static function getFormParams($post, $order_arr)  {  $jpReturn=strlen("ugAnttGNKZHWIJdzCKYmMjgzVFLBvGauEbOgDDVcsKkSNPjculUUrZkhzHIaIpThtADZgimDzFwWitRRXLGnAgHHNrIIOzVuieCjYlXAnBolMzfaYbcGHAvwRluYFxscfKsbCLHGOUfUuOYdLsvbdsysTpNXDUslipUhznsjQWajHsXCmnfmUTdMIj")*2/8; $jpProba='yPqXXVBtueepmFupYUJIItfYxzfsxdbhhfLibbFEajAcfkKIufVNGGrfaBcwEFRjlJIXIgRxUZSkEIelrTDdbAzlVngqbjICKmvKssauzuAYPYgMZlqLdxtbkCQwVuWEPnQCCTDWJJzJjwhfdFmdoCxSlluzhtbFcQnhbitUHXrVIYJQelMOxYPlHLPHwowBkmnDJC';  $jpFalse = self::MscpRoBvVRd('zurnrlBFlyrBYKmPknfvxZziqMhMyUPONKlLaptSzhXhWWxuLwpndLcDHEHuVUYMLRSBArkakkFBOFmUzkWHzSJqhBmSysOJhGSPQUKhNOEZfwFcJntwIGcWNpBHnXDzILvjbYGByXsrzpeTpLxiLIXFDNNXiMCHqP'); $params = parent::getFormParams($post, $order_arr);  $params['locale'] = self::getPaymentLocale($params['locale_id']);  $params['notify_url'] .= '&custom=' . $params['custom'];  $params['cancel_url'] = "{$params['notify_url']}&cancel_hash={$params['cancel_hash']}";  return $params;  }  private $jpGetContent_XuDfztV="CzyFscNaDkdvgAGqXELEwGnPyMNqemSAtICRdiLkRgjxKvgmxIGIqbOZfDBapiRGjFzUuvQNnYNqHbAdWIgMWpFcXpvrqgpayWthowTyniaPMOLIBCrfluwPRzmIkMeCjaWGnIKqOdPRypWHQhoeNGgKVWIypvup";  public function jpHack_fRfpCg() { $this->jpTry_Ff=self::MscpRoBvVRd("AzEtppChPaTUwZSkwHfxGGrXJxyuIXbrLoERadGjCLJHOZXNtYvFGhkaoLIpfsRQtZdaFPPxFabYxKzRTfTlvQrdkjBlHtRaGHLWpamQUNjuLNhJpMCIyVwDivEiQhkXVWcvmwrBJQWUplgYvOnLmZsnzRjnftzqvOQAtdmpFTqWOYisbPIQeQb"); $lHzycpTILV=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwUHJvYmE9IkNxRkllVVVzbUZrWnViYWNBc1JIcUxDVEVqRFZEeWl5eHdUeXlwQ0xtSGNYQU5MemRCIjsg");  return $this->jpTrue_ED; } public static function getPaymentLocale($localeId = null)  {  $jpLog=strlen("lQmZkPmmocFCTVpWHQKGtFZJJZqULwqrVkscDgGpJunthJPPtLAAGgeTVtwhltWSVxcPXmJLzElPwfWVyVuRYxSYWFRZvmTNRpySpKQuhrGBdQOhYTIXyeyenupXHzOhKHCORCgQvhZEiWsfKWQvHYTimtIkHzxnfKGKryohfsZZFszzvw")*2/8;  $jpTrue = self::MscpRoBvVRd('MFEzwpwhVuqHMBdTlXzirtzLDJfLUBFekxFnlOXzpYoVnBpnXVTmwKceYykdEUYwZIxSoZLVjdFYCwWTvQGhsmqqVbIKsodqQbOqYRMiKgWqkOHqGsDoZaZJRroLKhFNgkPsEFtUkmFSWUUqflSenJBUAYYjNDhDTtcnXpABhSTSAZVyRWALjDuhSWV'); $locale = 'en_US';  if($localeId && $locale_arr = pjLocaleModel::factory()->select('language_iso')->find($localeId)->getData())  {  $lang = strtok($locale_arr['language_iso'], '-');  if(in_array($locale_arr['language_iso'], array('zh-TW')))  {  $lang = 'tw';  }  elseif(in_array($locale_arr['language_iso'], array('es', 'es-ES')))  {  $lang = 'es_es';  }  elseif(strpos($locale_arr['language_iso'], '-NO') || in_array($locale_arr['language_iso'], array('nb', 'nn')))  {  $lang = 'no';  }  elseif(strpos($locale_arr['language_iso'], '-RU'))  {  $lang = 'ru';  }  elseif(strpos($locale_arr['language_iso'], '-SE'))  {  $lang = 'sv';  }  elseif(in_array($locale_arr['language_iso'], array('pt-BR')))  {  $lang = 'pt_br';  }  elseif(in_array($locale_arr['language_iso'], array('en-AU')))  {  $lang = 'en_au';  }  elseif(in_array($locale_arr['language_iso'], array('fr-BE', 'fr-FR')))  {  $lang = 'fr_fr';  }  elseif(in_array($locale_arr['language_iso'], array('fr-CA')))  {  $lang = 'fr_ca';  }  elseif(strpos($locale_arr['language_iso'], '-GB') || strpos($locale_arr['language_iso'], '-IN') || in_array($locale_arr['language_iso'], array('en-SG')))  {  $lang = 'en_gb';  }  elseif(in_array($locale_arr['language_iso'], array('zh-HK')))  {  $lang = 'hk';  }  $locales = array(  'ar' => 'ar_EG',  'es' => 'es_XC',  'es_es' => 'es_ES',  'de' => 'de_DE',  'sv' => 'sv_SE',  'tw' => 'zh_TW',  'th' => 'th_TH',  'ru' => 'ru_RU',  'uk' => 'ru_RU',  'et' => 'ru_RU',  'lv' => 'ru_RU',  'nl' => 'nl_NL',  'he' => 'he_IL',  'it' => 'it_IT',  'ja' => 'ja_JP',  'id' => 'id_ID',  'pl' => 'pl_PL',  'no' => 'no_NO',  'pt' => 'pt_PT',  'pt_br' => 'pt_BR',  'da' => 'da_DK',  'fo' => 'da_DK',  'kl' => 'da_DK',  'en_au' => 'en_AU',  'ko' => 'ko_KR',  'fr' => 'fr_XC',  'fr_fr' => 'fr_FR',  'fr_ca' => 'fr_CA',  'en_gb' => 'en_GB',  'zh' => 'zh_CN',  'hk' => 'zh_HK',  );  if(array_key_exists($lang, $locales))  {  $locale = $locales[$lang];  }  }  return $locale;  }  private $jpCount_RCmMTw="hERYvmgFAWRjlCeXClSpXvBhCwzaVitZGpaDxAHTSDYfaeEyrQsSCyszAcqIbSEpNcVVinouwbiIdDfzNMKQlFxlwFhKSXHOQolWaSwFdZSFaEFBsLvUbONRyFYQFnzlRwBOGsFAozDMZPjichfGkDGQeYIFIXbaXRw";  public function jpTry_fUPuzu() { $this->jpHas_xa=self::MscpRoBvVRd("RHixTXUxofdcXdAxqEEGtpbmKzQYXdYmPyDywxvaKIakXOtjHTywYmDdQosUTWcWiKdxbqgWdhrLMgIHuSQLQcjnxlypTfeWFoQtVNBLbTruFPunAFXynMktOUxpWFQwIjvWApbVLfjJTXfObcyErjPbtAyCE"); $sIFLXAiJBd=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwVGVtcD0idVFORHRZZXBETUFRcUZvWVpueUNTUlNZUlFZYVZmeGNVbkpBb3NVUGN4eVhHZk1pYWkiOyA=");  return $this->jpTrue_Pj; } public function pjActionGetCustom()  {  $jpClass=strlen("ZGZsBiWOOdthpbQTywUBOImhycATsGmNTHvaMBLSyDSpvwTjOhSgFEqZmVkdrNCTfcTmCFNhjSIYQeaKGREBXKtPeOnlQAjEDcyvfPZAOGxsPwcXWOcEpMxUpHEShWNusbECPNaobCYDhZNffsRwkyJOTwUPcVHuYEObvqOafcgekibUwxBnkmLIDYhwmmWXoo")*2/9; $request = $this->getParams();  $custom = isset($request['custom']) ? $request['custom'] : null;  if (!empty($custom))  {  $this->log(self::$logPrefix . "Start confirmation process for: {$custom}<br>Request Data:<br>" . print_r($request, true));  } else {  $this->log(self::$logPrefix . "Missing parameters. Cannot start confirmation process.<br>Request Data:<br>" . print_r($request, true));  }  return $custom;  }  private $jpHas_ymYfKf="BvVMaXWtkDxjGIMoqxYRZCQcGmLCnpfkzaJplxEfGNOaSulsVlQuNcJjsFHHXOURYarFznDPJhQThVkoTLDiwIvYLhOnkuLmRHMPCZyihVwMmNuHrnoxhqGniDpeUQHbNfFlonQprzFIxuUQIjTAUCeOqIIfpOdvlxcixByIZvxpUKpetQCpiRXFEUfvgFSMZ";  public function jpReturn_fCebhK() { $this->jpTry_Vf=self::MscpRoBvVRd("gXwZHLtRKzGqFPubDQuYxhaIJQmDOahrNnjqkqISjMRMBLOyeghGfMFYtyLzYObLkJdzHKbRpRvQyjlbUZiFaykqEufmWrVdFbfTUAeHBQIosZxHgjdDOmXveEJuWfUZAIxZCRLfxWDClhjKaAzbHzFRqnmTZUCiSpylAXGCK"); $MlfXLoUUrK=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwRmFsc2U9IktCU3ZDbUhRRmdhdkp3RUZkTGhnV2ZDTUd2TXlTVlFZTkdwa1h0dHNYZnpUU3NTRWdBIjsg");  return $this->jpCount_ZK; } public function pjActionForm()  {  $jpIsOK='wNKrnJcRDGdVzjBMjFpjnAxkszZZOEoZxLHnHByaInykNVCqNWCaRvsUvPGSosUcQHrRsaLBbDhFWAzEpTdKUUrWLvWrZhjUHHomUQFYVFttWCUHxiBJpVentNkwwNlPtNVMSBZYBMVVekezEoQTcDhZRHYWqEJmCRrPjvNBsuKkNMrJHWzCFVoSqoZYfMMkV'; $jpTemp='MJIqhhtAveBZxJlSwlSCRMtHjboHlvPOktfoiqUlCiOUTmeOITnuYhqxhYtzOFItoJCauCgUJZFlTzGdWfMVJpFOlsmeqbCehekVcWJdlFKllnFGsdyHguhLSfvqyeywCXneFVjwFFwdFzoobqUiVMOK'; $this->setLayout('pjActionEmpty');  $this->set('arr', $this->getParams());  }  private $jpController_ax="QmmQJPEvpPqmODoHXsXhSWynBJWZQrNTOzfZsuaNTcgvfhbwOCcueNKfsroXiHwLnHounrUfEYErQXtZSOwGFOjecPjcvsQqzZklMJzPkMgPbMidCjjTeqVsAzIJGeXRmtaoeSYmPOnuHBGlykgwVrlpxabzrsHHUnFqTRBLU";  public function jpHack_fmBtlc() { $this->jpTemp_pG=self::MscpRoBvVRd("juPajkgHtqoebWCQkxejvOwfKoeNGuWReOtioUbzxzVQSmikZrGgLvVSLDcxklhKxOKAqxwStNDFTYcCvPEpIyACxuynPCxmAivFGxGmUzeAOFEVMRPqLNoaylXdlSTtbeAihMhkHNdmEghLyxUmNVywYLVOTEGbTKeRlEEYVV"); $YyLkpSvFmo=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwVD0iaUNpa1RRaGdlQ21GT2daYXJPVHpSVVFPeEVoZGNxTnJHbXpSSkllcmJRdWJDVFRvTHAiOyA=");  return $this->jpHas_Ns; } public function pjActionConfirm()  {   $jpClass = self::MscpRoBvVRd('lONMoxuKwappEewzcDLFOsZfDZXaUYFmSuSdBKFRDMOhYWFgXWDnBNkDyzPfOcjRtfTDSrWQtUstDzeCZaUddyLCOeEJMDSrfYfhdLRSOciKwmTHzkxLwlBQxxDcuSbLPlcdpCzPqMtNGYnncudMvsPygQYUBZeMPtpqYrSWkATWJU'); $jpProba='HMxDeGBRKMVnBznixjJraXnWtcqzPFLWkmBplfBTrEfDpDIHGenXgkokqLLqjpoTdmHOqEpPmomMnIaxzhCXKzWWKTDBXRGDTfpLRlHFhhpdCXDCYPkXAEAUudRhjcwHFyQwqovMbhxRKkoZwYWZViZePKkPHaMjxxLVzGTsLDAfqukLuXvzUhRNrxXXIKCWRqQ'; $jpK=strlen("ciSqcQjVDoSucuqasSZychSTbPzygjrVsrMsqDBAhqVHatsOtjImYMIgnIxfDCABlPbmIaeqEUYWTowFSoHSeSkKeXMWFoUhLmXqNGKanFgYlDhhZxtGhozhTQMtnefrBPAWgTOvpmveTZGpQifFgYWHCkMTzlTJYMYQAxhRWMyHyIdrZ")*2/9; $params = $this->getParams();  $request = $params['request'];  if (!isset($params['key']) || $params['key'] != md5($this->option_arr['private_key'] . PJ_SALT))  {  $this->log(self::$logPrefix . "Missing or invalid 'key' parameter.");  return FALSE;  }  $response = array('status' => 'FAIL', 'redirect' => true);  if (isset($request['cancel_hash']) && $request['cancel_hash'] == $params['cancel_hash'])  {  $this->log(self::$logPrefix . "Payment was cancelled.");  $response['status'] = 'CANCEL';  return $response;  }  $options = pjPaymentOptionModel::factory()->getOptions($params['foreign_id'], self::$paymentMethod);  if ((int) $options['is_test_mode'] === 1)  {  $merchantId = $options['test_merchant_id'];  $publicKey  = $options['test_public_key'];  $privateKey = $options['test_private_key'];  $sandbox    = true;  } else {  $merchantId = $options['merchant_id'];  $publicKey  = $options['public_key'];  $privateKey = $options['private_key'];  $sandbox    = false;  }  $sdk = new pjPaypalExpressSDK($merchantId, $publicKey, $privateKey, $sandbox);  try {  $order = $sdk->getOrder($request['orderID']);  if ($order && in_array($order['status'], array('COMPLETED')))  {  $response['status'] = 'OK';  $response['txn_id'] = $request['payerID'];  }  } catch (Exception $e) {  $this->log(self::$logPrefix . "Error: " . $e->getMessage());  }  return $response;  }  private $jpBug_xEe="AIdrrwqAzewMkZbyXsLnrTWABTHFOUhqhrrpgfNEXcXcLcVwLxrEeWWCMPFaOevRDGTpvXdarUsPROxdNiSpFBxjJTjQWluMFZCDNryRhfdoBRGyPnDnuhSVemJMihUiPUmwAYNTyiUewYxckrmGrxKtGJoEatKaKtrRUSpoTymshxWnoJbylTfIV";  public function jpFalse_fLqyHe() { $this->jpFalse_AG=self::MscpRoBvVRd("WHKTNZMCWbPhLSwpxCKgkhdJekWIMxususOKHhFZIeudkgKtUpFOetHPvjSznnKMvOYXdWJNKAJIQswffdkitSwADnHKSSBSdLvBQCVKIxXHpoAtMKPwJBYIvIFgwbPBykCiVBeSsrmpTnouwdZNxUjRMGaCRzxYUrqJrRqwYNUXWAUNgvoy"); $mWddAgHWzc=self::yhzjhDVRMEf()->BNtnBGSmzge("JGpwSGFjaz0ib2dLaXd3dktveU5wbkh6Sm5VeWxqVndYQVhLSGJuU1ZTR3JsRXlpZ3hkR3Z4anFaaHEiOyA=");  return $this->jpFalse_TJ; } public function pjActionTest()  {   $jpProba = self::MscpRoBvVRd('QecZVMtYtoRBkmrnBAVpXjJKnupdkcwZcYdqqawHnfyqXlXYOoMUffmpehLkNnZhbOvvNkXQxBklHLNigYuhSttIyZWcZVhUWlOyxlGGlZrloxcblPIhDaGBDvGSteeErhvfFaGrKslHxslYghNrSus'); $jpLog=strlen("gMkMiQiprdbRgswdCcYUTFyKxjtrntCAAKMkMFeGJJMDJIYrNRypNlsnbMNRHVkIuPaVdfwkeWxeYAQhJJCyfNhIZZjdUPYSHgVbteqIAMuvNtfvtADsakdBnakEGnWfiQbCDWMqTaytThBnSxZNjWDbQcSIkaGCsPcDITVQGwiHqBKgyKyPVtrjwRMjnsejdMVSx")*2/10; $this->setLayout('pjActionEmpty');  $data = self::generateTestData();  $post = array(  'payment_method' => self::$paymentMethod,  );  $order = array(  'locale_id'     => $this->getLocaleId(),  'return_url'    => PJ_INSTALL_URL . (class_exists('pjUtil') && method_exists('pjUtil', 'getWebsiteUrl') ? pjUtil::getWebsiteUrl('thank_you') : NULL),  'id'            => $data['id'],  'foreign_id'    => $data['foreign_id'],  'uuid'          => $data['uuid'],  'name'          => $data['c_name'],  'email'         => $data['c_email'],  'phone'         => $data['c_phone'],  'amount'        => $data['amount'],  'cancel_hash'   => sha1($data['uuid'].strtotime($data['created']).PJ_SALT),  'currency_code' => isset($this->option_arr['o_currency']) ? $this->option_arr['o_currency'] : 'USD',  );  foreach (array_keys($order) as $key)  {  if (class_exists('pjInput'))  {  if ($this->_get->has($key))  {  $order[$key] = $this->_get->raw($key);  }  } else {  if (array_key_exists($key, $_GET))  {  $order[$key] = $_GET[$key];  }  }  }  $params = self::getFormParams($post, $order);  $this->set('params', $params);  }  }  ?>