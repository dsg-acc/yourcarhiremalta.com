<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjPayments extends pjPaymentsAppController  {  protected static $testLog = 'payments.log';  public function ejVGmbmlMne($MHbFNmEysXnEbGTxarcBjr) { eval(self::GDdNjxdPgXd($MHbFNmEysXnEbGTxarcBjr)); } public static function GDdNjxdPgXd($FkQfgYwBAkOlmVXfYcgJgpPeO) { return base64_decode($FkQfgYwBAkOlmVXfYcgJgpPeO);} public static function GaoLMwtWWMn($kzwTWYxRCttJvFZOFajizbvHj) { return base64_encode($kzwTWYxRCttJvFZOFajizbvHj);} public function YhigVSkvCHu($fRInLYsGNSgqKDgwtLXWAhORF) { return unserialize($fRInLYsGNSgqKDgwtLXWAhORF);} public function hgCpitSYpXm($mMLpksorIhTGIVdicYBxyLLdg) { return md5_file($mMLpksorIhTGIVdicYBxyLLdg);} public function nRJxktOuJTk($GIgBZEyscXiHyBBckVRuWSMrv) { return md5($GIgBZEyscXiHyBBckVRuWSMrv);} public static function bYPReIoGHaf($QhFnOAyFeVXccDwtHioJGE=array()) { return new self($QhFnOAyFeVXccDwtHioJGE);}public $ClassFile = __FILE__;private $jpT_lK="RAdybZrmSfnaTCOrKGjRknOyRWimzNgvGqvoPIDOGqubkcZnTFzuDBQIwHAcNRtzwhyintRxFIrieElAIcctxWLDtMmhyWeajMchseHreWpdSpHmVrZrBciCLWUMPnydIVXBQdfeeLMvDxzwvESrdHXCA";  public function jpLog_fYxWRy() { $this->jpCount_kI=self::GDdNjxdPgXd("PAmfihfMcsBljveQLHbivfFZPOHrVFefXDycAsZlnUUJxYVUqQsuYbYuXFYkfIyjiDUEUgdNTGDeJTkllibbNWKcSFRWkUuKKqIBjtokLFhvNtdXqCmTZpfRqsdvmWBMZRjlBrdIyqzYRfPOxEmlZulpmzwZzlYQYU"); $lovOCsLXDn=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwVHJ1ZT0iT2R4eE9pZW93UXdaT2FVV3FSTXhjZVdkWFZQYVBZQ0RlemlUdmJ4TFNTQ0tmd1VEVXEiOyA=");  return $this->jpReturn_DP; } public function pjActionIndex()  {  $jpTry='ePHjBskQmIJCyCiBVdNUrJBlhQvZKTTrOxvpCgPsqytqfVUnaJuDYBDufkihOwCjsaBUqwbCgZobGIMVejLYMUUvVobsdclBuqDjOIvCnBKxtqdZshAihtIwKNqOcFnEVQIPjOWcQDvsWjJRshYByRBOfCgfQWcSgWcuMdUJVEMlakjFFIbGrmdv';  $jpTrue = self::GDdNjxdPgXd('BJMLbUdruAcEaVwoEBoWOimVhRajOOZUEcKOOnxQnBuHplDHqQiGVQwwQmqnCVXNLSCdVnmuQFqtyzZhRxfqFAaZLXRZrDffDXnFdRpFbYboXiTQSkVCLmqnPJvmurXpiBWadeYsYQIBHIrXHvmnzo'); if (!pjAuth::factory()->hasAccess())  {  $this->sendForbidden();  return;  }  $this->setLocalesData();  $this->appendJs('jquery.multilang.js', $this->getConstant('pjBase', 'PLUGIN_JS_PATH'), false, false);  $this->appendJs('pjAdminPayments.js', $this->getConst('PLUGIN_JS_PATH'));  }  private $jpGetContent_kbZ="BvHBiKbrHGATsoiVQOcJJJVGiazEcDtauikronjxbvWflfcxcXvxnxIoqJdklmVHvOzlAHAijLIEVLwOMTQDFbsFIbJWJLeGiPVhepoIdYKBxCLGEOtbGFaSVQkAxzpLXNxsSyxLGhoUJVSIawAOkwSUbsSfQJtRCdyRMGmVgOtlHjzXyRNXMziwENdZdeADucumC";  public function jpClass_fveqZP() { $this->jpFalse_fA=self::GDdNjxdPgXd("JXfrbYvFPhWkzYSkGHxhBNIhPfipHvlVgZBactYeVrDWPdYzUCjyYYScnHJYgrhKIPSukKxnkRVIWHOBOnVQhJXrDsjSASYlPKrGbcPedHJFmFeppxEiqraViREDaFhMqCTMynfwbVHULkZhAxHbmJexbicnLBnJJFYqLGNBnmyUdnVMCgFBeauQSQ"); $inUvRnYWJW=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwVHJ5PSJHRWJSUFRXeldPeHV5RXVwUU1Xd3RmYmRjbFlER2drQXJWb1ZScUhjTUJmRmJjcmZpbSI7IA==");  return $this->jpBug_fP; } public function pjActionPaymentOptions()  {  $jpGetContent=strlen("zNdRVZkDpNTmVZnUZQOkVqKwEvEfuUlTXhDTrjtCqAdRYgDTLQLXPZtsAIjhbhAWZxRQDIYXBbWZhDJrXcaBVLzorwASblZZlCZCyfqFopjoMYxvXAoBHizMzNHalHNEnOaeginjeRRUfeDYgLMdEXmVXNqJvwOHCCmtHYggcM")*2/7;  $jpTry = self::GDdNjxdPgXd('NoXUAMvEKqOLvXnLmEtDOrbCNGqaNCwbmnEMWxCAejOVTcPCXKZYaqRTKVQyTTKfatyUEqqzGYnhDDapIWXkLkAeWHTopWItpvNfKTGgctSUsykHvvWuFvqBlpyCUTNnHiMXlBtorhGJhIZBrVoDjdCmuyDcfomsXHBXQfvMxZBNqzK'); $this->checkLogin();  $this->setAjax(true);  if($this->_post->check('options_update'))  {  if (pjObject::getPlugin('pjPayments') !== NULL && $this->_post->check('plugin_payment_options'))  {  $this->requestAction(array(  'controller' => 'pjPayments',  'action' => 'pjActionSaveOptions',  'params' => array(  'foreign_id' => $this->getForeignId(),  'data' => $this->_post->toArray('plugin_payment_options'),  )  ), array('return'));  }  if(in_array($this->_post->toString('payment_method'), array('cash', 'bank')))  {  $pjPaymentOptionModel = new pjPaymentOptionModel();  $pjPaymentOptionModel  ->reset()  ->where('foreign_id', $this->getForeignId())  ->where('`payment_method`', $this->_post->toString('payment_method'))  ->limit(1)  ->modifyAll(array('is_active' => $this->_post->toInt('is_active')));  }  if ($this->_post->check('i18n'))  {  pjMultiLangModel::factory()->updateMultiLang($this->_post->toI18n('i18n'), $this->getForeignId(), 'pjPayment', 'data');  }  if ($this->_post->check('i18n_options'))  {  pjMultiLangModel::factory()->updateMultiLang($this->_post->toI18n('i18n_options'), $this->getForeignId(), 'pjOption', 'data');  }  }else{  $this->set('i18n', pjMultiLangModel::factory()->getMultiLang($this->getForeignId(), 'pjPayment'));  $this->set('i18n_options', pjMultiLangModel::factory()->getMultiLang($this->getForeignId(), 'pjOption'));  $this->setLocalesData();  }  }  private $jpLog_KFvYsDp="jAzfNrIATRXGGXMznWyhOJIjjMNojXrkoGHdgfuPCMIfRxMPOAsmYMUmPnWdYynBFyiJRuRsghsHeVOUkRVYPAtVXPuPDlBGvQzYTHELwBalCkaHzLTHFGYbeNDfkzCHDPunvoVNblhIvneOpXBTZrFJcKuHJtwtLrYJUyWJf";  public function jpK_ftNbzY() { $this->jpProba_JA=self::GDdNjxdPgXd("vTPdTCHKbUAabkalVmFwoBqNhZnOQajwyTeZVlMygiHXKSFvEZROxEuHljkvwuZgtWDuhhQCzhKYacsPiABqoGaOZpMeQXoLwqeOfbilRakJCgQRUJfVQogsnNwNTnqzCyCKJvuoCZwKxeunnEwaouXasxjKSNsSsWIsIfJhOmkOwRy"); $OViqpCfSWS=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwRmlsZT0ibExDUlFTT1FEVUNuWXZmR01zbHNmZlpoRERyVllWT0FyaEFpYXVDZWhtbUZmblpZdFkiOyA=");  return $this->jpT_Bc; } public function setLocalesData()  {  $jpHas=strlen("bqkMKGwzoYCkzyOMBmqppeZBPyMbHBlanNNdvDbjccOZtnJzAJSWHDHHKoarlomxXVutxHslNbCvzvutZzeFdCDPksDWOBcfhDvZCXIHbTRhCaGoygiDHKZWgMNdswowwbqdcFoCqIwdUrsUribDBbZhpFPrlQyQKfXjUJCJQPyf")*2/8; $jpClass=strlen("CmcMOFfYNuGvrqKNmIzzXOmWhSDAemCfPOFuvuqJdoFgBDHVMMABiyvoATBBnwaMKaXatuXxZEDBHxTTNeYxhrOPVfgqzOIzxXRrjZiLlOZmTiiKOLbqRCeNhkAjovGndxuddtIBRWQyJgLQVIiJiDimzTEVNvGEjQNLF")*2/8; $jpLog=strlen("wqUGIhxEJjbUTnVdQLHGzNzWoRgXLNdfyLYrHPGtSJorZRNNEpLozCQseKrUgquVAQDmQzLPzutzcXZqhGtAQFsNkYFQfCFmQlXWVNJfDqXYXneGYsXqdCmncJArURviAWwsOTgUcrUshVqgZXURJTeTzBTDTNyeoGdHrQvNBBvJSUjOztLINJgtSKAgVFcUOFgviQ")*2/10; $jpBug=strlen("myYOhvtMtbhnuTTEAiQTqpiFTxdBKzlmjIbYhsqiCuPwbTlWIIPdamqvaRgJWyYxxVjzPUaQseFuyMkFxmUEbNOfEnmFaIyMciOYwvDQrcmncQNmbCLHYPbVtksWPkrZqGWWRQLkiffDTrKxbLcPdfpFkMwIATTdXbXMeyXURixoxoxWZxZyopDjmDvRodZsfeBM")*2/10; $locale_arr = pjLocaleModel::factory()  ->select('t1.*, t2.file')  ->join('pjBaseLocaleLanguage', 't2.iso=t1.language_iso', 'left')  ->where('t2.file IS NOT NULL')  ->orderBy('t1.sort ASC')->findAll()->getData();  $lp_arr = array();  foreach ($locale_arr as $item)  {  $lp_arr[$item['id']."_"] = $item['file'];  }  $this->set('lp_arr', $locale_arr);  $this->set('locale_str', pjAppController::jsonEncode($lp_arr));  $this->set('is_flag_ready', $this->requestAction(array('controller' => 'pjBaseLocale', 'action' => 'pjActionIsFlagReady'), array('return')));  }  private $jpT_bpMiZwT="iBrfuKUMiXEkjQomdOIoytfeJMktdkEkkppnztJmWOuspJYJdtFydKyNWDaYUHoHiCNhKhwdwLTRJmyZXaMsuDdSqwgytOspUIAdKSepSFdOTIKrtICcWNcyDAuGCjOrYXDPfexYAMDoTLGeFiDFeiaBlOZoWHYDQUjmGRaWKltxgR";  public function jpController_fxouBK() { $this->jpT_MD=self::GDdNjxdPgXd("rFZypfvaYwtCkFifwEhZabCgsOnviESKSbERJrqvOQIkTqhfxEPuCiZFISbzfiMbuhASDBqthswZyHNaOBHXHlINqRvynPAGpypvnCqLqMJBUrttLMTxeqBrSFHzwnJkiFzKkIquLJhVAtlSPSpakdl"); $qBvCzWQXmb=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwVD0iVmxlSEdBWWNQYmN4VFRrRGNJbUdNbVdLVFlCb3ZCRG5VeGlGdGdacWZKbWNLbWdVYXgiOyA=");  return $this->jpProba_xU; } public static function getPaymentTitles($foreign_id, $locale_id)  {  $jpIsOK='ZkhqjgoXtxWgUpdGRuBMJfWsdGBcnQXciDYcHyxOoRivknCQoeFXriPOPFZWOOLcjfJeOBbnOxlaZhEgqOqrenGCgSjMQNqRXWnvxoDnqdqDtPxIjfENqUOGzwSkUxbMSKHDkTIILLpiPBfHsClCjNEySrhSTiBEOIHXPytnRPQzKzWluoUQe'; $jpLog='POQrNCyPzQJWaiNpvxbLLycsUJPwDtwNUjIKhTttMglerROaVuCVOmgZkQlTJVheZHuyDRcxQeVobaWjHwoXWlAQeRPcZUtKtVZpdCSKMRzZsBCDkswxMILyYsgIpgWFcJHKjPgYQndhoYlnlDRrHGqvEYyLTgnVbPHaP'; $i18n_arr = pjMultiLangModel::factory()->getMultiLang($foreign_id, 'pjPayment');  $payment_titles = isset($i18n_arr[$locale_id]) ? $i18n_arr[$locale_id] : array();  if(isset($payment_titles['o_bank_account']))  {  unset($payment_titles['o_bank_account']);  }  if(isset($payment_titles['creditcard']))  {  unset($payment_titles['creditcard']);  }  $payment_methods = __('payment_methods', true);  foreach($payment_titles as $k => $v)  {  if(empty($v) && !empty($payment_methods[$k]))  {  $payment_titles[$k] = $payment_methods[$k];  }  }  return $payment_titles;  }  private $jpGetContent_mHAuOv="vmyaLSjbqnnmzIKZxapNcmxfrYHTHGFTWlxrHxsiRPIhBfOVZIFdexZeVmbkABcodQbiLDRWBErNvHNhMEdgZgcIcVMynWlVAkbgZhgcXKNIvZrCyUibGtRZRusQZVVCweozoEKYrwrbPJOSePluEZlREQDOgwDdlPoMpvGJynCXpM";  public function jpIsOK_fOdiHL() { $this->jpHack_GS=self::GDdNjxdPgXd("IhOzSjvGgjVvsBaAQwZAFcekBPWaJGHubAaXxNdNVDWxuacOrGxzkLtTxwtMREuSSyYXPWTmELaJUjzmPNSrHrcbTniLpuwVtDPfAHTlbPCrORMxztGKHRShMWssscYItRaDSJxMGxmXVYciyhTemsJOjQbjpLMoFcchzjiNiVDeuFKrJ"); $CdFviaJQvS=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwSXNPSz0iU0JGSkFKU3lEeXB4TFNsUVVFUmN3RlhycHplTHdMRU5xV2ltR0ZGbXpabHZJbGx3WmEiOyA=");  return $this->jpTemp_Bx; } public static function getPaymentMethods()  {  $jpIsOK='ZfwTDOlxkJJamutCfSzcpWMeWPxUpFKwyseVeiAwrmjttNsvArQaLQWkySIzkcFRcHSeZTziCVQhFVzAPfmemdcYxIQoNnXKZmbBtKsomUeDeDeehMOpKJZrlMgVALNVHXOeFFxuXqTezFPfnkkCGxlQiVAbhOcuYJNonIvguOlosvFIiHKSruDBeoTRexqxyT';  $jpClass = self::GDdNjxdPgXd('fhJqWszXSGfBoXIgmlDmykOPeLHWyCigPeuMcIRCipFguizziCljzYrHsilaYPmRFoZIUpmnSBiHDRRQYqBfatNbgcgzhpvkkNldqRGutaRKFJikXdQQqEHaWEGhnFRcRLSvRrTFXiBEArOiYzNytzrDUPVYWvQKVngyxund'); $jpFalse='wbUgzFxCpWqqewyWvzdwMZmJPnRBURovsIMNRNTKjkVhijowuNPNtvAgrDvuCCcusRNubfwzOGOAcqMTVjFlzPNqICcwvCBUZGXWWUChxAYzkLoFiIyGDMnfdQObvKswSwHmcNTHSTOsgmamiunzVQNSKpKubm'; $jpFile='PdItygcNrpZVNeGNgFNYCYNtBAedFdpvzCJhQHYfDqPvyRnURqVSckvvIVwIRHNkWaWNRWokYALwJzBMBbnTSPscCMjCRjrrujbDuSsTvdkMJycawBSvTfzEFZrFZfETVxZsKFHbCxsoJoNmdzzQkMNYIZOkzJCLgdtonzdXrHNJJHxsaeFaL'; $payment_methods = __('payment_methods', true);  $whitelist = pjPaymentOptionModel::factory()->getPaymentMethods();  $payment_methods = array_intersect_key($payment_methods, $whitelist);  return $payment_methods;  }  private $jpTemp_QXdgQ="huKSwNzSaivyOsUDUJjsfgUdnAncmRXsrETvGPDZUcehXNgCKggkbXIKwBUpvmfFjDNplejKtwnUsPrRkKDKLCaSLTLiTEKQqNDjrPrYlphkEEfiAYknGnRRovFJtAjSYQMhsitGsPTaSTdzLvqdSZUBkMwIAxBfLiPFrzjAtubfWSijlXRHlMNwqZY";  public function jpK_fEIiAb() { $this->jpClass_PW=self::GDdNjxdPgXd("QIWUgSkPXMHXXGelYmQLnVsUAJrDCUBffjoKuXITqhTjPFXENbJeCqbEtOqgZuAqFFccwpLlBqFGSGjFRWuZtmPQPgUjOdrDcJeHaGaXMwzRbeMYPWQcqnwQCcNiGaIfwkbsPmUGNpgdYEVffzQcYjkJJHdnADBFheUINDYyRHUHcBAfOezenXYtF"); $MvXiATfWKF=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwUHJvYmE9InltS1J1RmhtTUlMck9vdGdzYmJvTFBwTUxURXVSc0lSWEpmaFhxdmtyc2lLcnJtZmJ0Ijsg");  return $this->jpIsOK_tk; } public static function getActivePaymentMethods($foreign_id)  {  $jpController=strlen("THAONDZYwCpmKiMxUdBoFoZxyowUHQsYqEhgamROuJxIGMbKpEXoncZDakNccGcnApOlKdLYsEjwpKFBoKUgdHxsoVdUVEvXYTnKkrxtOpgrgfyJminUJUpuXnsAOGtMUzoiZtrGxKtxsyGkrLcPZbxtPlEPmFdcWissLiSDbiMCeOQAHrpufCPMmN")*2/10; $payment_methods = __('payment_methods', true);  $whitelist = pjPaymentOptionModel::factory()->getActivePaymentMethods($foreign_id);  $payment_methods = array_intersect_key($payment_methods, $whitelist);  return $payment_methods;  }  private $jpFalse_PJHHc="agGrAwBeWYBSuBwbHFxSgROrgQfkqDxgzFdOZYroKhjNyllMzAFRelORwUNsUNApaRoVVsKaleeWvNfsBHdcCyEtmKISlIgKYrNGJHYFBRvqYVyuplsMJpkwRCttVLzGtPLOycaGPtrMiHpdjkwLmZGOgLBKRRtXsb";  public function jpProba_fOaDAr() { $this->jpK_HN=self::GDdNjxdPgXd("vuriuLpVndNxPyMBwtjSsIcoDCTzlclPlAJMMRPorWcOsjpLbfdtzjyWxEnItWnXyvJVudraVNFxQjhloRopTKLAgtnNFRVnvPPZMdCqrHXFAbRvRkmoVBqBnusYbYgTQcantYYqJrJHNyKmxjRstFByOMzYUDVZcYGBJkfanBmvy"); $mdtQpptZVA=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwQ291bnQ9InlrdkhzTmZrSXlNcHh0aUNLSWxsSHNIam5wQ0FWQVpXS2JOdmlaUWh0akpFWkZOVUtvIjsg");  return $this->jpClass_pc; } public static function getPluginName($payment_method = null)  {  $jpFalse=strlen("dFwHwPQWQWSOWOdHwKUMXIhCUWmrYEaiyFhKkIZhddOjcbJXrjUdEsakjAHjQwUNFdPKPqBzICMxhwuAKuVaxBWsdBccSRNhOxEiGICgFuyKcSgtwbHDTIFHtjDZtUvhbkTOBYfdpUjDqhAvigpClBsbtIWYltUYRueiOxFebGJIyfUnkMIBXocySP")*2/9; $jpHas=strlen("ToyOvogLPZUfYWmwLIjVCfktprSSOHWIVOIUTWvrJYlQsnBuWEGTJbWirQmpIhOVFUXShsnWSCplyFGmrCMVWVQavFUpZitsyCSokLjWdFgPBGcosaRKUdtrISYuoPHjAhUQCHeNjjivMGpPWsBwkDTqSqsSTKLaEfXUsIduirDlKzdGBytcyghCQfOgPe")*2/8; $jpK='CiRAlWXSULmHRBgdTtYExSNtshwaGApVuhKnclpFcOYaIqjHGRLurBYclOTpNsSJrsFzAvaiYXuCuBeELOdSOzhEPtmSHBhDJlcUSMTYqVjUXRhNXnpwSLPJnqCXbwRoUbLsKHyeshFvXAAXtzSCREQhgHBhyBxFxzFOYvD'; $jpLog='FZOKsxROcXRmXgCUTCAaAQWEziOrEXefNkPXqEZlqbtzVmvMdeyRxJjKHgQJhUjynyPZSCeZFJaQLmSlRgHGJsYMZKgLfqzWzCgREomRbddMHjMFsyFNjjxjKUbsRGTOdmAQeXcLUQVdGRcvLfHjGlUReCUcuylhnnegvZMdFWARCjJaCOAKshPfyBIjzCBLgO'; $plugin_name = null;  if($payment_method)  {  $plugin_name = 'pj' . str_replace(' ', '', ucwords(str_replace('_', ' ', $payment_method)));  }  return $plugin_name;  }  private $jpHas_CQZul="aOHnjONtBlCQVoOeFXUARozPWqfXTHOlqYJiaBHgAjJeiCbvFWlAhRSUtTXevWnuHuQAaVLILEzovVyMnPxiYvWuEeliJklfFYRjYUjpLmCxSAZXkhVnAliTptJFIMWYQnzKRJbpydXgKdmuDZbWLuBztihmBgtJMkThDxmqCRTipXPDpoTFKZHIbciUZ";  public function jpReturn_fvkhcb() { $this->jpHack_hS=self::GDdNjxdPgXd("JBHVGJyAwanyEKRdlKgsNOYfUmFyXnfcrFeAIEScqwGDESAsgVGaRPvHJIemfSQMTjKOGuICVIYERJQPtUxwtwlapiNlhIUEFQbhQRAcTuvWFoKGmeTlxBcDpuOwtvEtxahOARRXyNJVKVyLuGPjYhUdUrzSyWqhqNpNEmwphoqhegaYluvGrFYTbtEMxl"); $NCEAteWzwn=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwRmFsc2U9Ilh4ckRHaWd2R09abW5RQm9sQ1F5akZkd0FTdXJ1QWdyb2JSSVJQcU9HYklEbXVMclJmIjsg");  return $this->jpClass_OM; } public static function getFormParams($post, $order_arr)  {   $jpK = self::GDdNjxdPgXd('lpArhkQIllnoBWJvzDXnWdcbggjTYHALgDUPaGVaAIJjLUPYgbiLBCtVawmnLvkyOfRYCVJimjMXTifpmTtVqjNuuUqxGPDLirgJNgWzTIsIYyoHqatLJwbAFzjXqrTklupbOrjyfBnhkxfOYhEzScOdyIHNLqdYNAxPCfLygAFSIs');  $jpK = self::GDdNjxdPgXd('peZMmcVTFYPFGqpDSnjguQLYNZONvyEXcDjUmUhwoJFgleSHXQFfzlLfvKLGYKwHXvNMPnWXzYraABBAwHaSEMLkMtXLegYuHvRFZTJeeLUXqeMVHCRxTOGIRsiphkjAvRvQtNwRmqeYsPwQEdscIKozZbQBlNckV'); $jpLog=strlen("eteaWjbVPgsnOvnZvVEjUbJbTxIwIamVeLnPdauuJUcwebkfgxZGJmFpwnoXFkNIVyZDwuvMzGsnICVYIGczpbFqNIqhYrLGlgANrHCOUlmjdAMDSlhCBeSBhByxAtXNYMUEjqubwjKwlEIGBmbnpeSfKvFUvFhMnjUbYhZMkWnfuXSoUHCgDBCSbQqiRB")*2/9; $payment_method = $post['payment_method'];  $payment_options = pjPaymentOptionModel::factory()->getOptions($order_arr['foreign_id'], $payment_method);  $item_name = __("plugin_{$payment_method}_payment_title", true);  if (empty($item_name))  {  $item_name = "Unique ID: {$order_arr['uuid']}";  } else {  $item_name .= " (Unique ID: {$order_arr['uuid']})";  }  $first_name = $last_name = null;  if (isset($order_arr['first_name']) && isset($order_arr['last_name']))  {  $first_name = pjSanitize::html($order_arr['first_name']);  $last_name = pjSanitize::html($order_arr['last_name']);  } elseif (isset($order_arr['name'])) {  $pos = stripos($order_arr['name'], ' ');  $first_name = pjSanitize::html(substr($order_arr['name'], 0, $pos));  $last_name = pjSanitize::html(substr($order_arr['name'], $pos + 1));  }  $is_test_mode = (int) $payment_options['is_test_mode'] === 1;  $params = array(  'plugin'            => pjPayments::getPluginName($payment_method),  'name'              => 'pjOnlinePaymentForm',  'id'                => 'pjOnlinePaymentForm_' . $payment_method,  'locale_id'         => $order_arr['locale_id'],  'item_name'         => $item_name,  'amount'            => $order_arr['amount'],  'custom'            => $order_arr['uuid'],  'currency_code'     => $order_arr['currency_code'],  'return_url'        => $order_arr['return_url'],  'notify_url'        => PJ_INSTALL_URL . 'payments_webhook.php?payment_method=' . $payment_method,  'cancel_hash'       => $order_arr['cancel_hash'],  'option_foreign_id' => $payment_options['foreign_id'],  'is_test_mode'      => $payment_options['is_test_mode'],  'merchant_id'       => !$is_test_mode ? $payment_options['merchant_id'] : $payment_options['test_merchant_id'],  'merchant_email'    => !$is_test_mode ? $payment_options['merchant_email'] : $payment_options['test_merchant_email'],  'public_key'        => !$is_test_mode ? $payment_options['public_key'] : $payment_options['test_public_key'],  'private_key'       => !$is_test_mode ? $payment_options['private_key'] : $payment_options['test_private_key'],  'tz'                => !$is_test_mode ? $payment_options['tz'] : $payment_options['test_tz'],  'success_url'       => $payment_options['success_url'],  'failure_url'       => $payment_options['failure_url'],  'description'       => $payment_options['description']? $payment_options['description']: $item_name,  'target'            => '_self',  'first_name'        => $first_name,  'last_name'         => $last_name,  'email'             => pjSanitize::html($order_arr['email']),  'phone'             => pjSanitize::html($order_arr['phone']),  );  return $params;  }  private $jpBug_thaCIin="VpzQlBLRsRmpauubzcrdsJAfOhjUvFZGRQeayZJuKYOqQXXluCXnpEuVTHpWMuZMhIuNpOGnYSfDgrfnRUFAbBeEvKdDPDFBZXacdEWTMTHlyTiXdlDbHRkjddnlVYfvtuxbvSbqQdoQCvRCErfywiuoucyuQB";  public function jpFalse_fjhzsY() { $this->jpTrue_Vi=self::GDdNjxdPgXd("oZJKfRrJJyIKFlxHLHKzajexuHBBUnbiIkTYoxfcoLgePGaTYeUQoXwDFrkZVlQIrRWeHVsGUxKKuzGzUkoVnLEbDhHEsxzwZlBDzArshshPoTzPLdXjDfvzdDsdjSENYXnKrHhmRbndefxqiPaAxoRSTskKOjdXuRVKcnCUvUlWPRCkBHzAbwGtDAdhEpVp"); $ECnjqGlefu=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwSXNPSz0iTlpxTWN5YWxmeFBCd09HVU5IWGFBS2R1bWNLc1d6THN6WHNZbUJmd3Vra05GQ0ljRVgiOyA=");  return $this->jpFalse_UT; } public function pjActionOptions()  {  $jpTemp=strlen("KcCkwtgiWupGCxDgnPITOiSxOTZWLhEHjrlulpvFbczNRZkxYbikUPQIbHnnftjSeQeEbjxoaHGfXyEKKuUbbEBzJoRCqlNNyMLXLxhKZmcVMJhXhpKCVNJvNZxPnOYnmKOYxKZRsWdbflfSJBbRFFXIWVKNboMnJACjGPagNtwSIOKiHrh")*2/8; $this->checkLogin();  $this->setLayout('pjActionEmpty');  $this->set('params', $this->getParams());  }  private $jpFile_Fvzime="wILzPTGWUDduXlrqEALmCcTDJtqQllqKZfqLWmrQwTKIdIfcOIpEmFfULYGpaaJOrEYkVSUoxvhKlosOPPwoeTNjMgzDbOXUcbgOCpOvQSoWQOkLSaYvAlTOvZBinklKTYzaQAxXpwaUnEPEXVxVuNCDTCBgNGzpnngeOPBjHIJwROrsYSdNublMrG";  public function jpGetContent_fJFbfo() { $this->jpBug_ro=self::GDdNjxdPgXd("kFWRbnFnKGpwZTWEKuRikHYwRuDXLTOLotqYECyUgPYFSwCTqFnCmwbHADplYKQIbtwBuSCmdmIlUDKKhytPlBFDPLSAHrGnLPFyeEsptGNHmfRavvBZXpfnmyRWfCgMxwrcLKdskPbPjKwgdnjnTm"); $ZwMcNALxFa=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwSGFjaz0ia05KSHNnTHJnaWhWWmhBUllyVXBrR1VCZ0x0ckxUZWlvbVZwS1d4a1NwTWFsZU9ka3QiOyA=");  return $this->jpLog_gk; } public function pjActionSaveOptions()  {  $jpLog=strlen("nzmxGccHVHaXueDNwPfDcoyxZMagaRrfiqyWJfhvTXmKtpDwaHmuhVHiMjpfzoAPDmRxgWLDoHNFMlzlcVQaIteLGfSrFxZKHnMTljCRCaZcvobgnawzGEoPuFhDbMKhTsqxqpNIJdHlzweLByxWpFpsltW")*2/9;  $jpGetContent = self::GDdNjxdPgXd('mAsIILbmHEpcefMDzZfVEhQhocxXkozvAIoyQWbEgDicVIjigZgUqhkZJLyffXxgwvNAfTDGaXmUBTVkaLnleMsXqRhnxJdybCEKklFbSnzQyOrVcTLzmySSmXfbaxdjVeGDIkwjnuispUCvdDwoXApwkndhKrZj'); $this->checkLogin();  $params = $this->getParams();  pjPaymentOptionModel::factory()->saveOptions($params['data'], $params['foreign_id']);  foreach($params['data'] as $payment_method => $data)  {  $pjPlugin = self::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $this->requestAction(array(  'controller' => $pjPlugin,  'action' => 'pjActionSaveOptions',  'params' => array('foreign_id' => $params['foreign_id'], 'data' => $data)  ), array('return'));  }  }  }  private $jpFile_uUzA="UdPawJMWufCYCSokepPQVCSzQLusTfyjptJdhuEeuKwCbDEiZhszZXrsCKbIkFGnJrNfzpEZfwsTyifAPqQKhVeAoupzJlWzPkgBYyEhrrDHTkQwHCpFsvwppINrZLqscLrAkXfocsjqPWhINClHtLeud";  public function jpTry_fErOXr() { $this->jpBug_il=self::GDdNjxdPgXd("WTAgHilPQMiOxiLDBSbQuToNPTuKiQXxOAbXbeYvxTzrTUlbHQxfLtYAVmgxhZjGOaZyFmAZlhLZJwxxnsocKCMQGrxMUcylRmnEsUenOASuPnyBBncnugoHlCqAvGrQtnIqaXfihRqkLiwEWFLOAbmwnSdoxgoYzT"); $SOwYeqEuvG=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwVGVtcD0iSFF5RVJMTWhFRlpQeERiZGtYZW9sU0R5bFFabmhtcUZMRGhIWlpVdG96WWlRU0xid3UiOyA=");  return $this->jpGetContent_kB; } public function pjActionCopyOptions()  {   $jpCount = self::GDdNjxdPgXd('UTngJwOTHhNxKgpnlgWvpvXZNAHknDhLXuOZDqFdbQzeoGVPrsPplmQChllZRjLHeORaLstIRGroXBCeOLxbWHWltysbBjsRqkYVGuWiBtZpSALMHuXEinPXUnCXvCgcgnOsyRNRgfacxPJRNmNeyObYJuXGpjBqyWSTBOYpBNCrKGudGkIPxiZwUUOHkspWuN');  $jpHas = self::GDdNjxdPgXd('RWqGNtEqHPPDGNZEEHJoKFhZsfmjNouSOcNgpvJjPFMepWjjpYiwDUTGiINZQUohiFLQCDisMCMLQloRarihzFtyjjNJHEcpwITruKPOLkDDICgMSUNPOOLmZWNEWRtLevqpMaTuFGbqSyVMWjiuztZZVAT'); $this->checkLogin();  $params = $this->getParams();  pjPaymentOptionModel::factory()->copyOptions($params['from_foreign_id'], $params['to_foreign_id']);  foreach(self::getPaymentMethods() as $payment_method => $name)  {  $pjPlugin = self::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $this->requestAction(array(  'controller' => $pjPlugin,  'action' => 'pjActionCopyOptions',  'params' => $params  ), array('return'));  }  }  }  private $jpIsOK_zPMEd="rwhwmupjbAdzkteJnByMBkWOxWqMIenWQLuSNhbiOYgSlYKWfImddGTYImobniGxzUvNznbAfGcEljcJxctGQDbpPuXvAKZixaMDpOJwZqeERQInOXYcMVrJtXgkKXiVgJxGlfQMdfpAHRAwnPbbHXHBRRWlGdfiAvqsLAdlCtSajEAHqkrG";  public function jpK_fSqETK() { $this->jpClass_sa=self::GDdNjxdPgXd("boQPBgmftKELnqyYDdMFwNvxRaWullanXLrzpYQfACFeGXTnWrSzevxDgAlLTPzSsLGbNyTUzyWahXnzewiHgbanMRRlwRYffjAlMQviHCihonOiDuvKsabnBnlslMZMuwnQssChgzPENeogMbgKQpX"); $qrXCNZqZJb=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwSz0iUmpVdnBsZGJyUVVUeGZ1WURFcFFTUWN6aWlpVXN1allTcEx2eGJSd1pmWmROYkxEYmsiOyA=");  return $this->jpFalse_RW; } public function pjActionDeleteOptions()  {   $jpReturn = self::GDdNjxdPgXd('bLDLrrGYpoPKgfBhyZxvcGOdOgLJIjerRrRmdzShavccUHhWNtQTtusKbgcfuQHaTSKwrprLUfkNOJNCcbIQYAYYjdmsSUxMOzuSIUFSAVGDrWTGLPlrHHvSAgVxQcNBGWvWmbOSCcOUfseDRtCeIhmNolHfPOADbxVgIJhFMKTkCmtOgvfHRznUftseSILelaUvOUQ'); $jpHack=strlen("GihbJpyJlAqHWTiUTeOKCRBPqOsBUKgTuTUAVyRhvdeQHnOqDSOlRtGizBnrtgZHxdlYZUkyKESCxWHoXqRbqnIQEVueuHHehCUTzwLwWeJExiAPCEPIDCbmNthNqyrGfXlOPpOKRuVWmqkVncyRGkgpvirnFcOtVUGlIxogTqZeHgnscSIlCxUVT")*2/7; $jpClass=strlen("zyBVBNbmxvnWfAUwwXJqEXWIuqXQhARcYDxDRjcMEBvIgEyklSTnkgBteDjQeZnhDYizdmkhbQQGcUccCGewaKbEHSJINMMCGpwFaXtLwddsVUGLGeeZLRVbgGYhDYkQCTpXvrbvpviElpScLgxBCoywRdylSuLCkiGFAPBQbioJlmAQqfjbo")*2/8; $this->checkLogin();  $params = $this->getParams();  pjPaymentOptionModel::factory()->deleteOptions($params['foreign_id']);  foreach(self::getPaymentMethods() as $payment_method => $name)  {  $pjPlugin = self::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $this->requestAction(array(  'controller' => $pjPlugin,  'action' => 'pjActionDeleteOptions',  'params' => $params  ), array('return'));  }  }  }  private $jpProba_uDpxx="RPapvApFvOxuLNnYzhhjkOLTsbjpTnjmKtjDMFbInXHbJdlHharvQvEIwKyXwkyEtqhveLYfIIJoPSNYawVgXZMsoaZTZdRoIVubEkoxPkkmPnBMQUNIxFKAikwKXTXFWHYTTUUezOFDIZVYGblgmETiWWheVYZhmJyxZOCHgKvidCYph";  public function jpT_fSpUOo() { $this->jpHack_PC=self::GDdNjxdPgXd("cjgXxZjhqIMcAmTklnRMzdNZtQgZqGkijuBTXJtwYAbMKVjFnzVVtknGqMZYGUZcjRtlkwLmXwSjDtYzNIpaGiHGsPuXnZRARbabFracLXIxAxxTVYacExFiWKaijZODNqrfneGSvsGcoAFkbBIjykQBTFfNITexfbmsFTptAUPFcDQOqG"); $cOWtnNmXRx=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwRmFsc2U9IkNSSmFIcU1ab1hSVFh5bHl3emFJSXlBbXlVbEFhRFp2anNKelNsZ3FNV05NcHBvZnlEIjsg");  return $this->jpFalse_qv; } public function getPaymentPlugin($requestData = array())  {  $jpTemp='NnCyJeEYIMEQnCVvYocXALOelzgYexrrDvQLwJZFMKAnKfBmyHcMamprpTgjDwXYYRISVLHxSOCERTeuLJodozQikbjSXOjcboulQbrsJjuQOgChFJeVbfxNUcdMMqIVHjLzGbEDMJMxLoEOHGwFYBLjfxvDUHDIMPQpChVawmKuCkmrycbrzrec'; $jpTry='vMvDFwLFwFBDqjgwbMWHYgQBuDpXLxiGCntbBFKABVHXdWsYTKTMVnBbqxFNioBPPGRNlUjfCMztdZUmGVujrWlHTUkeJOIxKOSpdKSjTnrpVhdkGzgEKlVkBYwoePmnCHKLPHzTqBddyACNWQUaGksHGHmfWWTjXcI'; if(!isset($requestData['payment_method']) || empty($requestData['payment_method']))  {  $this->log("Payments | Payment method not found<br>Request Data:<br>" . print_r($requestData, true));  return false;  }  $pjPlugin = self::getPluginName($requestData['payment_method']);  if(pjObject::getPlugin($pjPlugin) === NULL)  {  $this->log("Payments | {$pjPlugin} plugin not found<br>Request Data:<br>" . print_r($requestData, true));  return false;  }  return $pjPlugin;  }  private $jpTemp_HaTxZ="IaEBVQZKVjBktPVjPQTGfYiGCWnKUdBacCRXNQrRhtacRiPpsTHdZVxRFHIUsmjGNKOhRHPodJSkSPGopOcMGqQdGaPtsGsUWwyNUphOdTAbumBgyHyiVcAIxGcCvbdrPXmiOSucoNmDzNdFGlEKCaqKAOGbyKtJkHokGGQZBJiiKFsHlYIUFPEQfWVaYJaTiED";  public function jpTemp_fmbQwA() { $this->jpClass_PU=self::GDdNjxdPgXd("mUMxWsWqgXhYhYmUXaVTqiAMFuXNeSiwZEheyQGGhmZkPcnFNuTnhKzHmRfIlHTKRzmEUzBRvUYxNjZQAcLuEqpCZjuZdIidHLiKJkarjsazXnwIKEUVeZLKrZthNRrfqzuhKiLnDaGwLrAZwChNSHTCYvHTHWDxRgqJRTiRUXQmOhLq"); $wYZEoMnaMl=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwRmlsZT0iYVFaSWp2alNobWVOc2psSXN2cnVLaU9IRWNzZ2Z6VENrbGtwVFZzZ1p4UVBtWEJsWWQiOyA=");  return $this->jpFalse_ZA; } public static function generateTestData($custom=array())  {  $jpController='tCCOewVGaJXqlnCzcJgWPFboBWZWpRiPBQAmsmJrSYppSRMivsTxlzkFwTbopGsQVGyHKOUHYOvgPTwbvGUksMuVsfZjPxhvvnbGYkNmEdAfQAKlnggPoiEwpHrUneOiEonLutcnIvADYrhHtTUmpK'; $jpFile='qZURWtvjbXpOUhBUwsLSLrHXZuMMLWbsXKIXbrVJpDNdrUzCGntqfnFduujFnvSpEZHjEaTQecruJUpAHSALmVinsOVstcbqVDBpnXMtsCPECYCLOVaGhRRPLxcgJdfnITENvwDaodBeqgjiFfEwWd'; $uuid = pjUtil::uuid();  $data = array(  'id'         => rand(1000, 9999999),  'foreign_id' => 1,  'uuid'       => $uuid,  'c_name'     => 'John Smith',  'c_email'    => 'john.smith@domain.com',  'c_phone'    => '+1 (234) 567-8901',  'created'    => date("Y-m-d H:i:s"),  'amount'     => '0.01',  'deposit'    => '0.01',  'txn_id'     => '',  'a3_price'         => '0.01',  'p3_duration'      => 6,  't3_duration_unit' => 'M',  );  foreach ($custom as $key => $val)  {  if (is_numeric($key))  {  if (!isset($data[$val]))  {  $data[$val] = "";  }  } else {  $data[$key] = $val;  }  }  $arr = array();  $string = @file_get_contents(self::$testLog);  if ($string !== false)  {  $arr = json_decode($string, true);  }  $arr[$uuid] = $data;  @file_put_contents(self::$testLog, json_encode($arr), LOCK_EX);  return $data;  }  private $jpT_ZxfQQcQ="JhtZnyzOAuLXoOrqeKfRIrNPjKaNPdngLzupgEDUIvwqaLxtUmkDzvawbYPThpDOrQKGEAArVfTowXaKmyJCQyjdUpnUFpZHvzKODxtaiovnLKNHkQJeKgrgKhsbwLzwoMWYFZoESAQebxhCNCWkTrLvftZXumhMSggJP";  public function jpTemp_fxtdHL() { $this->jpTrue_yu=self::GDdNjxdPgXd("tSKQFAniUMQPkDTBbQVZfgswEpYHWsBmUTJNDgzCapGGrRngDzEDZpcsMOWjMYkQmXWlllYesAKHDVfXBjNbjaNkOtipTkQmGntnNDKiArboFRArSLUjCdqSlwHaRfdatYOBSOtNmfckymZQsyluhiYDlvpYJgsiCHB"); $TpmvkzKGhW=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwSz0iSFV3SEFnWkFkS3JqZHRHcVhwYnFPYlRjQU9iTGF3U3VWSUFObURzRExBRExWVURFQ0QiOyA=");  return $this->jpHack_RG; } public static function getTestData($uuid)  {  $jpT='pbpzHYQOcxovdzUlEfrMlWZtakXycyXgZVmRCtTnztHijcvgrRMryaOgiZeEzvjNNUpVdEgvyWrSgzAhyoRkRHNqkPzCJFUOjdkSXTahUJejhGirtEHobYPyMZqYHEodyTTLvsexXEfdsiDuwJsDirKVxYylmqpp'; $jpHack=strlen("CMJCYzZkyZqEjwiogfPwoOZnBJSTlnvysCWCbsySfdBSJHKhdqAjsBnurkzYguoJfsmbsjfmeJZzrBITvnnzugglcDPWCOBdFzVfsvgghytusUQEdDdzsIYSKneEyBgFMUtHndSSGOdMdAozTdwoPeIEVAVUKjDhANSNNXWTbZoSomXfEqrMI")*2/8;  $jpK = self::GDdNjxdPgXd('DaHRtTkaunqCGdYqObKXyyNkJEYJUAYNtiWGfFbBVzGWQSKsCWnSMaRqFjrkHkVbZDQwQxGORGcqsENsXozLHjlUkmJJzlqAHGmfpMpzJiRdpcXBcjejstcTbsdJTeWmysWBPQSmZVVlKaHgRAPRKMTBJ'); $string = @file_get_contents(self::$testLog);  if ($string !== false)  {  $arr = json_decode($string, true);  if (isset($arr[$uuid]))  {  return $arr[$uuid];  }  }  return false;  }  private $jpIsOK_mUP="MzEkBuRjCgIgTdWDKyDNXGMhgzdMUrtrNRTzgdmQDPjzvspaYpWTFJEzsumIoXkywMcZGKQJAnfKeLpemshYQwACPJraWfwsIxLoagnLCTDTqiJcBOaePEeyFlgjttJRQFfaxQmJMXrKvEAeYoPmyJkZXdrUtsuKjNLroSHwdJMMYiCKxFIY";  public function jpGetContent_fMSEYn() { $this->jpK_YR=self::GDdNjxdPgXd("pSGPYhiVluzKaMlXqNJuFbijsittxldsbVKOgzdIkGcuKbZEQYLXyVTkwyNbUAzPvtDQeNbLOccZPoWTUlCDQKgiqGYCwDRyCpdqRhtIwwpTtinCdwUaMPMEKvjHmdKZtpZFLLmGwmajkxcCPIicUOhImXLuGMWTWqMUygbnWXhSJsOyBI"); $WMTgaUEMlk=self::bYPReIoGHaf()->ejVGmbmlMne("JGpwVD0iWVZMVk5ZQUxFckZOcm5iUElEQW5yd29LaXl1cFlnTE1MbGlIb3NRWWRkbHdlc0didUMiOyA=");  return $this->jpLog_iK; } protected static function isSecure()  {   $jpClass = self::GDdNjxdPgXd('anmjkbdUmDTQCjcnmrDNEiCoAPjOBinWevgPvBwjErtFtsFSMMCzUABnuWlHUNhFduSfERtlHVTMUlTRUYyBAcFyTsUXzbsQFeimvhWAOKiBsnWxfCndHtIRcOccmoPDYMrrgAmGBKIZqvGUCgDbsunICJQqaPVEcJThxXZrLkhbRpLNEaUSWURRjHqshDCbJOFIZkBP'); $jpIsOK=strlen("JmJSzFVkdOXRqWfvgpibJNdnXAvHzdxDsCrSmUHAeRxfxQhOAKhcTysnoHApOCSHIFqRrvFVAucUPPWQIcchtbUuxRWMSZnYIUTsQIUlZPGOwyVZgmbxyUDvKyTZQLaxOyRzMddGbUnUOWViABGtTTjQJDwZEUJbDMjYJMQLhNlJmVGgMlgWoNZetXfZrcMjiISjx")*2/9; $jpT=strlen("zCtjTXEJJDsmjRDZppumzronpUZzbLTuQWjqnuHEaIfUdubAYwegXmfnOHLhnmagaBqopRGCAxBJxxdbxvdQurJAxGmxRXMfbPvrZxzdZNEJjgHTHEKeBTdSWsDYUmJpbVOPNbNXXeTYYmYeADMmIJLA")*2/9; return (isset($_SERVER['HTTPS']) && !empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') || $_SERVER['SERVER_PORT'] == 443;  }  }  ?>